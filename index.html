<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Ray tracing in Rust</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<style>

img.rust-logo {
	border: 0 !important;
	position: absolute !important;
	right: 0px !important;
	bottom: 0px !important;
	background: none !important;
	box-shadow: none !important;
}

div.ray-trace-slide {
	background: #333;
  background-color: #333;
}

img.ray-trace {
	border: 0 !important;
	background: none;
	box-shadow: none;
}

img.rust-logo-2 {
	border: 0 !important;
	background: none  !important;
	box-shadow: none  !important;
}

img.itera-logo {
	border: 0 !important;
	position: absolute !important;
	left: 0px !important;
	bottom: 0px !important;
	background: none !important;
	box-shadow: none !important;
}

img.stackoverflow {
	width: 80%;
}

.reveal .footer {
  position: absolute;
  bottom: 100px;
  left: 0px;
}
		</style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>

					<img class="itera-logo" data-src="image/itera-logo.svg" />
				   Ray tracing in Rust

					<img class="rust-logo" data-src="image/rust-logo.png" />
				</section>

				<section>
				<section class="titleslide slide level1">
					Why ray tracing?
				</section>

				<section class="slide level2" data-background-image="image/pixar.jpg">
				</section>

				<section class="ray-trace-slide slide level2" >
					<img class="ray-trace" data-src="image/cornellbox.jpg" />
				</section>

				<section class="ray-trace-slide slide level3">
					<img class="ray-trace" data-src="image/ray-tracer.png" />
				</section>
			</section>

				<section>
					<section class="titleslide slide level1">
						<img class="rust-logo-2" data-src="image/rust-logo.png" />
					</section>

					<section class="slide level2">
						<a href="http://stackoverflow.com/insights/survey/2016">
							<img class="stackoverflow" data-src="image/stackoverflow-rust.png" />
						</a>
				</section>
			</section>

				<section data-markdown>
					<script type="text/template">
					    - Ray tracing

					    - Rust

					    - Workshop
					</script>
				</section>

				<section>
				<section data-markdown>
					Ray tracing
				</section>

				<section class="ray-trace-slide">
					<img class="ray-trace" data-src="image/ray-tracer.png" />
				</section>
				<section data-markdown>
					Ray tracing
				</section>

				<section data-transition="slide-in" data-background-image="image/render-1.bmp">
				</section>
				<section data-transition="slide-in" data-background-image="image/render-2.bmp">
				</section>
				<section data-transition="slide-in" data-background-image="image/render-3.bmp">
				</section>

				<section>
					Ray tracing Algorithm<br>

					<pre><code data-trim data-noescape>

fn trace(camera, scene) -> image {
  for pixel in image {
    ray = create_ray(pixel, camera)
    intersection = intersection(ray, scene)
    set pixel color = colorize(intersection)
  }
}
					</code></pre>
				</section>
			</section>
			<section>
				<section>
					<img class="rust-logo-2" data-src="image/rust-logo.png" />
				</section>

				<section>
					Hello world
					<pre><code data-trim data-noescape>
fn main() {
  println!("Hello, world!");
}
					</code></pre>
				</section>

				<section>
					Primitives
					<div class="fragment">
						Static types are inferred
				    <pre><code data-trim data-noescape>
							let a: u32 = 1; // a: u32
							let b = 2.0; // b: f64
						</code></pre>
					</div>
					<div class="fragment">
						Immutable
						<pre><code data-trim data-noescape>
							b = 1.0; // compile error
						</code></pre>
						</div>
						<div class="fragment">
							`mut` for mutability
					<pre><code data-trim data-noescape>
						let mut c = 3.0;
						c = 4.0;
			    </code></pre>
				</div>
			</section>



			<section>
				Pointers and references
				<pre><code data-trim data-noescape><div class="fragment">
        let num = 100; // Stack allocated value</div><div class="fragment">
        let num_ptr = Box::new(100); // Pointer to heap</div><div class="fragment">
        let num_ref = &100; // Reference to value
			</div>
			</code></pre>

			</section>

			<section>
				Functions
				<pre><code data-trim data-noescape>
					fn add(a: u8, b: u8) -> u8 {
					  a + b
					}
				</code></pre>

			<div class="fragment">
				<pre><code data-trim data-noescape>
					fn add(a: u8, b: u8) -> u8 {
					  return a + b;
					}
				</code></pre>
			</div>
			<div class="fragment">
			Usage
			<pre><code data-trim data-noescape>
				let sum = add(10, 100);
			</code></pre>
		</div>
			</section>

			<section>
				Pass by reference / Pass by value
				<pre><code data-trim data-noescape><div>
	foo(num); // Pass by value (transfer ownership)

	foo(& num); // Pass by reference

	foo(&mut num); // Pass by mutable reference
				</div>
			</code></pre>
			</section>

			<section>
				Control Flow
				<div>
				Loops
				<pre><code data-trim data-noescape>
				for i in 0..10 {
				  println!("{}", i);
				}
			</code></pre>
		</div>
		<div class="fragment">
			Control structures as expressions
			<pre><code data-trim data-noescape>
				let a = if i > 0 {
				  true
				} else {
				  false
				};
			</code></pre>
		</div>
		<div class="fragment">
			Pattern matching
			<pre><code data-trim data-noescape>
				let a = match i {
				  0 => true,
				  1 => false,
				  _ => true
				};
			</code></pre>
		</div>

			</section>

			<section>
				Structures
			<pre><code data-trim data-noescape>
				struct Vec3 { x: f64, y: f64, z: f64 }<div class="fragment">
				impl Vec3 {<div class="fragment">
				  pub fn new(x: f64, y: f64, z: f64) -> Vec3 {
				    Vec3 { x: x, y: y, z: z }
				  }</div><div class="fragment">
				  pub fn length(&self) -> f64 {
				    let x = self.x;
				    let y = self.y;
				    let z = self.z;
				    (x * x + y * y + z * z).sqrt()
				  }</div>
				}</div>
				</code></pre>
			</section>

			<section>
				Structures
				<pre><code data-trim data-noescape>
					struct Vec3 { x: f64, y: f64, z: f64 }

					impl Vec3 {
					  pub fn new(x: f64, y: f64, z: f64) -> Vec3 { ... }
					  pub fn length(&self) -> f64 { ... }
					}
				</code></pre>

				<pre class="fragment"><code data-trim data-noescape>
        fn main() {
          let vec = Vec3::new(1.0, 1.0, 1.0);<div class="fragment">
          println!("Length is: {}", vec.length());</div>}
			</code></pre>
			</section>

			<section>
				Traits

				<pre><code data-trim data-noescape>
trait HasLength {
  fn length(&self) -> f64;
}
					</code></pre>
				<pre class="fragment"><code data-trim data-noescape>
impl HasLength for Vec3 {
  fn length(&self) -> f64 {
    let x = self.x;
    let y = self.y;
    let z = self.z;
    (x * x + y * y + z * z).sqrt()
  }
}
			</code></pre>
		<pre class="fragment"><code data-trim data-noescape>
fn print_length(shape: HasLength) {
  println!("Has Length: {}", shape.length());
}
		</code></pre>
	<pre class="fragment"><code data-trim data-noescape>
let list = LinkedList&lt;HasLength>::new();
	</code></pre>
			</section>

			<section>
				Traits

				<pre><code data-trim data-noescape>
trait HasLength {
  fn length(&self) -> f64 {
    return 0;
  }
}
					</code></pre>
		</code></pre>
			</section>

		<section>
			Enum - algebraic datatypes

			<pre><code data-trim data-noescape>
	enum Option&lt;T> {
	  Some(T),
	  None
	}</code></pre>

	<pre class="fragment"><code data-trim data-noescape>
	let emails: Option&lt;u32> = have_i_got_mail();

	match emails {
	  Some(n) => println!("You have {} emails", n),
	  None => println!("No emails!")
	}
	</code></pre>

		</section>
	</section>

		<section>
			<a href="https://github.com/Itera/rust-raytracer-workshop">Workshop</a>
		</section>

		<section>
			Workshop
				<pre><code data-trim data-noescape>
git clone https://github.com/Itera/rust-raytracer-workshop
				</code></pre>
				<pre class="fragment"><code data-trim data-noescape>
cd rust-raytracer-workshop
				</code></pre>
				<pre class="fragment"><code data-trim data-noescape>
cargo build           // builds the project
cargo test            // runs all tests
cargo run --bin image // runs the image binary
				</code></pre>
				<pre class="fragment"><code data-trim data-noescape>
thread 'main' panicked at 'Step 2a) Initialize a camera with width = 600', src/bin/image.rs:62
note: Run with `RUST_BACKTRACE=1` for a backtrace.
				</code></pre>
				<pre class="fragment"><code data-trim data-noescape>
cat readme.md         // rtfm
atom src/bin/image.rs // fixit!
				</code></pre>
		</section>


		</div>
		</div>


		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
